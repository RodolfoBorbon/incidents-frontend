<!-- incident-dashboard.component.html -->
<div class="container mt-4">
  <div class="form-group row">
    <h2>Incident Form</h2>
    <form (ngSubmit)="save()">
      <!-- Incident Record Number -->
      <div class="form-group" *ngIf="currentIncidentID">
        <label>Incident Record Number</label>
        <input
          type="text"
          [(ngModel)]="incidentRecordNumber"
          name="incidentRecordNumber"
          class="form-control"
          id="incidentRecordNumber"
          readonly
        />
      </div>
      <!-- Incident Description -->
      <div class="form-group">
        <label>Incident Description</label>
        <input
          type="text"
          [(ngModel)]="incidentDescription"
          name="incidentDescription"
          class="form-control"
          id="incidentDescription"
          placeholder="Enter incident description"
        />
      </div>

      <!-- Incident Priority -->
      <div class="form-group">
        <label>Incident Priority</label>
        <br />
        <select
          class="form-control-dropdown"
          [(ngModel)]="incidentPriority"
          readonly
          name="incidentPriority"
          id="incidentPriority"
        >
          <option>Low</option>
          <option>Medium</option>
          <option>High</option>
        </select>
      </div>

      <!-- Customer Information -->
      <div class="form-group">
        <label>Name</label>
        <input
          type="text"
          [(ngModel)]="customerName"
          name="customerName"
          class="form-control"
          id="customerName"
          placeholder="Enter Customer Name"
        />
      </div>

      <div class="form-group">
        <label>Phone Number</label>
        <input
          type="tel"
          [(ngModel)]="customerPhoneNumber"
          name="customerPhoneNumber"
          class="form-control"
          id="customerPhoneNumber"
          placeholder="Enter Customer Phone Number"
        />
      </div>

      <div class="form-group">
        <label>Address</label>
        <input
          type="text"
          [(ngModel)]="customerAddress"
          name="customerAddress"
          class="form-control"
          id="customerAddress"
          placeholder="Enter customer address"
        />
      </div>

      <!-- Incident Narrative -->
      <div class="form-group">
        <label>Incident Narrative</label>
        <textarea
          class="form-control"
          [(ngModel)]="incidentNarrative"
          name="incidentNarrative"
          id="incidentNarrative"
          rows="1"
          readonly
        ></textarea>
        <textarea
          class="form-control"
          [(ngModel)]="userNarrative"
          name="userNarrative"
          id="userNarrative"
          rows="3"
          placeholder="Enter the incident details here"
        ></textarea>
      </div>

      <!-- Buttons Section -->
      <div class="form-group">
        <button type="submit" class="btn btn-1">Submit</button
        ><button type="reset" class="btn btn-2">Cancel</button>
      </div>
    </form>
  </div>
</div>

<!------------------------------ Incident Dasboard ------------------------------->

<div class="container3">
  <h1>Incident Dashboard</h1>
  <table class="table-active">
    <thead>
      <tr>
        <th scope="col">Record Number</th>
        <th scope="col">Incident Description</th>
        <th scope="col">Incident Priority</th>
        <th scope="col">Name</th>
        <th scope="col">Phone Number</th>
        <th scope="col">Address</th>
        <th scope="col">Incident Narrative</th>
        <th scope="col">Status</th>
        <th scope="col">Update Status</th>
        <th scope="col">Actions</th>

        <!-- Added this column for the dropdown -->
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let IncidentItem of IncidentArray">
        <td>{{ IncidentItem.incidentRecordNumber }}</td>
        <td>{{ IncidentItem.incidentDescription }}</td>
        <td>{{ IncidentItem.incidentPriority }}</td>
        <td>{{ IncidentItem.customerName }}</td>
        <td>{{ IncidentItem.customerPhoneNumber }}</td>
        <td>{{ IncidentItem.customerAddress }}</td>
        <td>{{ IncidentItem.incidentNarrative }}</td>
        <td>{{ IncidentItem.incidentStatus }}</td>

        <td>
          <select
            [(ngModel)]="IncidentItem.incidentStatus"
            (change)="onStatusChange(IncidentItem)"
          >
            <option value="NEW">New</option>
            <option value="IN_PROGRESS">In Progress</option>
            <option value="DISPATCHED">Dispatched</option>
            <option value="CLOSED">Closed</option>
          </select>
        </td>
        <td>
          <button
            type="button"
            class="btn btn-3"
            (click)="setDelete(IncidentItem)"
          >
            Delete
          </button>
        </td>
      </tr>
    </tbody>
  </table>
</div>
